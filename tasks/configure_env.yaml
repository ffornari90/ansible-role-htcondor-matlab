- name: Get hostname
  shell: hostname
  register: hostname

- name: Get username
  shell: "getent passwd 1001 | cut -d: -f1"
  register: username

- name: Check if master_host is in hostname
  set_fact:
    is_master_host: "{{ master_host in hostname.stdout }}"

- name: Check if master_host is not in hostname
  set_fact:
    is_not_master_host: "{{ not is_master_host }}"

- name: Store registered username value in a variable
  set_fact:
    user_name: "{{ username.stdout }}"

- name: Extract network CIDR from master_public_ip
  set_fact:
    network_cidr: "{{ master_public_ip.split('.')[:3] | join('.') ~ '.0/24' }}"
  when: is_master_host
